<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" type="text/css" href="css/stylenotify.css">
	<link rel="stylesheet" type="text/css" href="css/resetnotify.css">
	<link rel="shortcut icon" href="css/img/nono.png" type="image/x-icon"> 
	<link rel="stylesheet" type="text/css" href="css/navbarnotify.css">
	<title>NotifyAi Test</title>
</head>
<body>

<header>
	<nav>
	  <div class="nav">
	  	<a class="logo" href="index.html">
	  		<img src="css/img/notif.png">
	  	</a>
	  </div>
	</nav>
</header>

    <div class="flex-container">
	      <div class="columnos">
		  	   <div id="map"></div>
		  	   <div class="article"></div>
			   <div class="article"></div>
			   <div class="article"></div>
	 	 </div>
	         <div class="column bg-alt">	
	     		<div class="floater">
	     			<a href="#" class="link link-1">here is a link</a>
	     			<a href="#" class="link link-2">another one</a>
	     			<a href="#" class="link link-3">last one</a>
	     		</div>
			 </div>
    </div>

    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 48.8584, lng: 2.2945},
          zoom: 17
        });
        //add marker
        var marker = new google.maps.Marker({
        	position: {lat: 48.8584, lng: 2.2945},
        	map:map,
        	icon:'css/img/nonofinal.png'
        });
      }
    </script>
    <script>
//function to insert new article after last article
function insertAfter(el, referenceNode) {
    referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);
}

 //creating ID for each new article, API to fetch and generate random comments/image
  var random = fetch('https://jsonplaceholder.typicode.com/comments')
  .then(papi => papi.json())

  //generate random sentence 
     	function generateRandomString(length) {
 		 var text = "";
 		 var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
		  for (var i = 0; i < length; i++)
		    text += possible.charAt(Math.floor(Math.random() * possible.length));
		  return (text);
		}


//verify if you are at the bottom of the page
window.onscroll = function(ev) {
  if ((window.innerHeight + window.scrollY) >= document.body.scrollHeight) {
    // if you are at the bottom of the page, start creating articles
     console.log('creating new articles');
     var newDiv = document.createElement('div');
     var nodeList = document.querySelectorAll('.article');
     var last = nodeList[nodeList.length- 1];
     // create the new article div
     newDiv.innerHTML = '<div class ="new-article"></div>';
     insertAfter(newDiv, last);
     //inserting text in the new div
      	NodeList.prototype.forEach = Array.prototype.forEach;
     	var theNewOne = document.querySelectorAll('.new-article').forEach(function(el) {
     //generate random sentence length
     	var randomSentence = generateRandomString(Math.floor(Math.random() * 200));
	//show the random sentence
     	var textnode = document.createTextNode(randomSentence); 
  		el.appendChild(textnode);
  		textnode = document.removeTextNode()
	});	
  }
};

     	//same function but for the first 3 articles
      	NodeList.prototype.forEach = Array.prototype.forEach;
       	var theNewOne = document.querySelectorAll('.article').forEach(function(el) {
     	var randomSentence = generateRandomString(Math.floor(Math.random() * 200));
     	var textnode = document.createTextNode(randomSentence); 
  		el.appendChild(textnode);
	});   
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKPr3wGM5PmFNqvlfJmUb6gJfornKhA0E&callback=initMap"
    async defer></script>
</body>
</html>


<!-- API KEY FOR GOOGLE MAP
AIzaSyBKPr3wGM5PmFNqvlfJmUb6gJfornKhA0E
 -->